{"name":"_Node_817","type":"graph","parameters":{},"node_position":{"x":0,"y":0},"seed_int":0,"label":"Graph","shortdesc":"","longdesc":"","nodes":[{"name":"Material","type":"material_dynamic","parameters":{"albedo_color":{"type":"Color","r":1,"g":1,"b":1,"a":1},"metallic":0,"roughness":1,"emission_energy":1,"normal":1,"ao":1,"depth_scale":0.2,"flags_transparent":false},"node_position":{"x":5344.909668,"y":1156.630615},"seed_int":0,"export_last_target":"Godot/G4 Standard","export_paths":{"Godot/G4 Standard":"D:/DUCKuments/GAMEDEV_n_ART/Projects/MaterialMaker_Projects/ProjectFiles/2025_11_06_WaterNSlime/wata_taest"}},{"name":"reroute","type":"reroute","parameters":{},"node_position":{"x":1197.261719,"y":1192.444946},"seed_int":0},{"name":"normal_map2","type":"normal_map2","parameters":{"param2":0,"size":10,"strength":1,"buffer":0},"node_position":{"x":4968.929688,"y":1285.554077},"seed_int":0},{"name":"warp_2","type":"warp","parameters":{"mode":1,"amount":0.1,"eps":0.1},"node_position":{"x":-5782.818359,"y":74.217018},"seed_int":0},{"name":"gradient","type":"gradient","parameters":{"repeat":1,"rotate":0,"gradient":{"type":"Gradient","points":[{"pos":0,"r":0,"g":0,"b":0,"a":1},{"pos":0.876979,"r":1,"g":1,"b":1,"a":1},{"pos":1,"r":0,"g":0,"b":0,"a":1}],"interpolation":1}},"node_position":{"x":-6551.167969,"y":13.387659},"seed_int":0},{"name":"math_3","type":"math","parameters":{"op":6,"default_in1":0,"default_in2":2.62,"clamp":false},"node_position":{"x":-6123.578613,"y":14.079116},"seed_int":0},{"name":"warp_3","type":"warp","parameters":{"mode":1,"amount":0.065,"eps":0.1},"node_position":{"x":-5418.826172,"y":240.503647},"seed_int":0},{"name":"transform2_4","type":"transform2","parameters":{"translate_x":0,"translate_y":0,"rotate":0,"scale_x":0.25,"scale_y":1,"mode":2},"node_position":{"x":-6354.246094,"y":21.957895},"seed_int":0,"generic_size":1},{"name":"colorize","type":"colorize","parameters":{"gradient":{"type":"Gradient","points":[{"pos":0.098145,"r":0.026733,"g":0.056883,"b":0.285156,"a":1},{"pos":0.826694,"r":0.715179,"g":0.734658,"b":0.839844,"a":1}],"interpolation":1}},"node_position":{"x":2941.699219,"y":1013.345337},"seed_int":0},{"name":"multi_warp","type":"multi_warp","parameters":{"param0":10,"param1":0.932,"param2":50,"param3":1},"node_position":{"x":-2973.144775,"y":923.841675},"seed_int":0},{"name":"blend2","type":"blend2","parameters":{"blend_type1":2,"amount1":0.85},"node_position":{"x":-1480.096558,"y":932.257141},"seed_int":0,"generic_size":1},{"name":"shape","type":"shape","parameters":{"shape":0,"sides":6,"radius":0.85,"edge":0.11},"node_position":{"x":-8069.359375,"y":1201.647461},"seed_int":0},{"name":"transform2","type":"transform2","parameters":{"translate_x":0,"translate_y":0,"rotate":0,"scale_x":0.445072,"scale_y":1.10593,"mode":0},"node_position":{"x":-7836.610352,"y":1181.146729},"seed_int":0,"generic_size":1},{"name":"shape_2","type":"shape","parameters":{"shape":0,"sides":6,"radius":0.85,"edge":1},"node_position":{"x":-8085.410156,"y":1371.764648},"seed_int":0},{"name":"transform2_2","type":"transform2","parameters":{"translate_x":0.381783,"translate_y":-0.060012,"rotate":0,"scale_x":0.92371,"scale_y":4.169888,"mode":0},"node_position":{"x":-7843.104492,"y":1402.081055},"seed_int":0,"generic_size":1},{"name":"blend2_4","type":"blend2","parameters":{"blend_type1":10,"amount1":1},"node_position":{"x":-7563.571289,"y":1232.102295},"seed_int":0,"preview":0,"generic_size":1},{"name":"warp_5","type":"warp","parameters":{"mode":0,"amount":0.1,"eps":0.1},"node_position":{"x":-5556.155762,"y":1338.888916},"seed_int":0},{"name":"tiler","type":"tiler","parameters":{"tx":6,"ty":3,"overlap":4,"inputs":0,"scale_x":0.7,"scale_y":0.93,"fixed_offset":0.09,"offset":1,"rotate":6.7,"scale":0,"value":1,"variations":true},"node_position":{"x":-5308.678223,"y":1344.398804},"seed_int":0},{"name":"auto_tones_2","type":"graph","parameters":{"size":11},"node_position":{"x":-6451.804688,"y":1460.710571},"seed_int":0,"label":"Auto Tones","shortdesc":"Auto Tones","longdesc":"Finds the minimum and maximum values in the input texture and tone maps it to the full 0.0 - 1.0 range.","nodes":[{"name":"tones_map","type":"shader","parameters":{},"node_position":{"x":1552.528442,"y":-98.269897},"seed":-54302,"shader_model":{"code":"","global":"","inputs":[{"default":"0.5","label":"","longdesc":"The input image","name":"in","shortdesc":"Input","type":"f"},{"default":"0.0","label":"","name":"in_min","type":"f"},{"default":"1.0","label":"","name":"in_max","type":"f"}],"instance":"","longdesc":"Maps linearly an input tones interval to an output tones interval.","name":"Mapping","outputs":[{"f":"($in($uv)-$in_min($uv))/($in_max($uv)-$in_min($uv))","longdesc":"Shows the generated remapped image","shortdesc":"Output","type":"f"}],"parameters":[],"shortdesc":"Tones map"}},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":439.528564,"y":-98.535721},"seed":-55041,"ports":[{"group_size":0,"longdesc":"The input image","name":"in","shortdesc":"Input","type":"f"}]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":1747.400024,"y":-97.535721},"seed":-15114,"ports":[{"group_size":0,"longdesc":"Shows the generated remapped image","name":"out","shortdesc":"Output","type":"f"}]},{"name":"gen_parameters","type":"remote","parameters":{"size":11},"node_position":{"x":979.664307,"y":-181.400757},"seed":-32042,"widgets":[{"label":"","linked_widgets":[{"node":"iterate_buffer","widget":"size"},{"node":"14423","widget":"size"}],"name":"size","type":"linked_control"}]},{"name":"decompose","type":"decompose","parameters":{},"node_position":{"x":1355.629272,"y":-50.053192},"seed":35843},{"name":"combine","type":"combine","parameters":{},"node_position":{"x":907.629272,"y":-50.053192},"seed":-46531},{"name":"iterate_buffer","type":"iterate_buffer","parameters":{"size":11,"shrink":true,"autostop":false,"iterations":13,"filter":false,"mipmap":false},"node_position":{"x":1097.594238,"y":-60.701195},"seed":29168,"seed_locked":true},{"name":"14423","type":"shader","parameters":{"size":11},"node_position":{"x":1087.629272,"y":164.946808},"seed":53617,"shader_model":{"code":"","global":"","inputs":[{"default":"vec3(0.0)","function":true,"label":"","name":"in","type":"rgb"}],"instance":"vec3 $(name)_compare(vec2 uv, float size) {\n\tfloat iter = $in(uv).b;\n\tsize = size / pow(2.0, (iter * 100.0) );\n\titer += 0.01;\n\tfloat pixel_offset = 1.0 / size;\n\tvec2 half_res_uv = floor(uv * size / 2.0) / size * 2.0 + pixel_offset / 2.0;\n\tvec3 values[4];\n\tvalues[0] = $in(half_res_uv);\n\tvalues[1] = $in(half_res_uv + vec2(pixel_offset, 0.0));\n\tvalues[2] = $in(half_res_uv + vec2(0.0, pixel_offset));\n\tvalues[3] = $in(half_res_uv + vec2(pixel_offset, pixel_offset));\n\t\n\tfloat lowest = 1.0;\n\tfloat highest = 0.0;\n\t\n\tfor (int i = 0; i < 4; i++) {\n\t\tlowest = values[i].r < lowest ? values[i].r : lowest;\n\t\thighest = values[i].g > highest ? values[i].g : highest;\n\t}\n\t\n\treturn vec3( lowest, highest , iter);\n}","name":"Compare Neighbor","outputs":[{"rgb":"$(name)_compare($uv, $size)","type":"rgb"}],"parameters":[{"default":10,"first":1,"label":"","last":13,"name":"size","type":"size"}]}}],"connections":[{"from":"gen_inputs","from_port":0,"to":"tones_map","to_port":0},{"from":"tones_map","from_port":0,"to":"gen_outputs","to_port":0},{"from":"combine","from_port":0,"to":"iterate_buffer","to_port":0},{"from":"iterate_buffer","from_port":0,"to":"decompose","to_port":0},{"from":"iterate_buffer","from_port":1,"to":"14423","to_port":0},{"from":"14423","from_port":0,"to":"iterate_buffer","to_port":1},{"from":"gen_inputs","from_port":0,"to":"combine","to_port":0},{"from":"gen_inputs","from_port":0,"to":"combine","to_port":1},{"from":"decompose","from_port":0,"to":"tones_map","to_port":1},{"from":"decompose","from_port":1,"to":"tones_map","to_port":2}]},{"name":"math","type":"math","parameters":{"op":6,"default_in1":0,"default_in2":1.2,"clamp":false},"node_position":{"x":-5008.308105,"y":1344.360718},"seed_int":0},{"name":"edge_detect","type":"edge_detect","parameters":{"size":10,"width":2,"threshold":0.4},"node_position":{"x":-7207.009766,"y":1427.147217},"seed_int":0},{"name":"dilate","type":"dilate","parameters":{"param0":11,"param1":0.04,"param2":0,"param3":0,"param4":true},"node_position":{"x":-6942.94043,"y":1445.447876},"seed_int":0},{"name":"blend2_2","type":"blend2","parameters":{"blend_type1":2,"amount1":1},"node_position":{"x":-6237.05957,"y":1525.409058},"seed_int":0,"generic_size":1},{"name":"tones","type":"tones","parameters":{"in_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"in_mid":{"type":"Color","r":0.149506,"g":0.149506,"b":0.149506,"a":0.5},"in_max":{"type":"Color","r":0.904411,"g":0.904411,"b":0.904411,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":-6227.558594,"y":1265.848877},"seed_int":0},{"name":"blend2_3","type":"blend2","parameters":{"blend_type1":3,"amount1":1},"node_position":{"x":-5922.730957,"y":1210.983765},"seed_int":0,"generic_size":1},{"name":"gaussian_blur_3","type":"gaussian_blur","parameters":{"param0":10,"param1":17.8,"param2":0},"node_position":{"x":-6733.584473,"y":1504.692017},"seed_int":0},{"name":"warp_6","type":"warp","parameters":{"mode":0,"amount":0.08,"eps":0.1},"node_position":{"x":-6451.923828,"y":1567.112793},"seed_int":0},{"name":"blend2_5","type":"blend2","parameters":{"blend_type1":4,"amount1":1.18},"node_position":{"x":-4041.060547,"y":622.68512},"seed_int":0,"generic_size":1},{"name":"buffer_2","type":"buffer","parameters":{"size":10},"node_position":{"x":-5197.853027,"y":255.750153},"seed_int":0,"version":1},{"name":"buffer_3","type":"buffer","parameters":{"size":10},"node_position":{"x":-4616.937988,"y":1353.799805},"seed_int":0,"version":1},{"name":"directional_blur","type":"graph","parameters":{"param0":10,"param3":1,"param1":16.9,"param2":-6.4},"node_position":{"x":-3225.937256,"y":918.881348},"seed_int":0,"label":"Directional Blur","shortdesc":"Directional blur","longdesc":"Applies a directional gaussian blur to its input","nodes":[{"name":"buffer","type":"buffer","parameters":{"size":10,"lod":0},"node_position":{"x":-364.25,"y":-255.75},"seed":20527},{"name":"gen_parameters","type":"remote","parameters":{"param0":10,"param3":1,"param1":16.9,"param2":-6.4},"node_position":{"x":-482.07663,"y":-519.57666},"seed":343,"widgets":[{"label":"Grid size","linked_widgets":[{"node":"buffer","widget":"size"},{"node":"edge_detect_3_3_2","widget":"size"}],"longdesc":"The resolution of the input","name":"param0","shortdesc":"Size","type":"linked_control"},{"label":"Mode","linked_widgets":[{"node":"edge_detect_3_3_2","widget":"mode"}],"longdesc":"Controls whether the blur moves in both directions or only in one.","name":"param3","shortdesc":"Mode","type":"linked_control"},{"label":"Sigma","linked_widgets":[{"node":"edge_detect_3_3_2","widget":"sigma"}],"longdesc":"The strength of the blur filter","name":"param1","shortdesc":"Sigma","type":"linked_control"},{"label":"Angle","linked_widgets":[{"node":"edge_detect_3_3_2","widget":"angle"}],"longdesc":"The angle of the directional blur effect","name":"param2","shortdesc":"Angle","type":"linked_control"}]},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-779.666626,"y":-247.392853},"seed":91624,"seed_locked":true,"ports":[{"group_size":0,"longdesc":"The input image","name":"in","shortdesc":"Input","type":"rgba"},{"group_size":0,"longdesc":"A map that controls the strength of the blur filter","name":"amount","shortdesc":"Strength map","type":"f"}]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":-45.452393,"y":-195.392853},"seed":30896,"ports":[{"group_size":0,"longdesc":"Shows the generated blurred image","name":"port0","shortdesc":"Output","type":"rgba"}]},{"name":"edge_detect_3_3_2","type":"shader","parameters":{"size":10,"mode":1,"sigma":16.9,"angle":-6.4},"node_position":{"x":-287.545471,"y":-132.608948},"seed":-47470,"seed_locked":true,"shader_model":{"code":"","global":"","inputs":[{"default":"vec4(1.0)","function":true,"label":"","name":"in","type":"rgba"},{"default":"1.0","function":true,"label":"","name":"amount","type":"f"}],"instance":"vec4 $(name)_fct(vec2 uv) {\n\tvec2 e = vec2(cos($angle*0.01745329251), -sin($angle*0.01745329251))/$size;\n\tvec4 rv = vec4(0.0);\n\tfloat sum = 0.0;\n\tfloat sigma = $sigma*$amount(uv);\n\tfor (float i = $mode; i <= 50.0; i += 1.0) {\n\t\tfloat coef = exp(-0.5*(pow(i/sigma, 2.0)))/(6.28318530718*sigma*sigma);\n\t\trv += $in(uv+i*e)*coef;\n\t\tsum += coef;\n\t}\n\treturn rv/sum;\n}","name":"Directional Blur","outputs":[{"rgba":"$(name)_fct($uv)","type":"rgba"}],"parameters":[{"default":9,"first":4,"label":"Size","last":12,"name":"size","type":"size"},{"default":0,"label":"Mode","name":"mode","type":"enum","values":[{"name":"Both","value":"-50.0"},{"name":"Single","value":"0.0"}]},{"control":"None","default":0.5,"label":"Sigma","max":50,"min":0,"name":"sigma","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Angle","max":180,"min":-180,"name":"angle","step":0.1,"type":"float"}]}}],"connections":[{"from":"gen_inputs","from_port":0,"to":"buffer","to_port":0},{"from":"buffer","from_port":0,"to":"edge_detect_3_3_2","to_port":0},{"from":"edge_detect_3_3_2","from_port":0,"to":"gen_outputs","to_port":0},{"from":"gen_inputs","from_port":1,"to":"edge_detect_3_3_2","to_port":1}]},{"name":"colorize_2","type":"colorize","parameters":{"gradient":{"type":"Gradient","points":[{"pos":0,"r":0.355469,"g":0.355469,"b":0.355469,"a":1},{"pos":1,"r":1,"g":1,"b":1,"a":1}],"interpolation":1}},"node_position":{"x":-3431.418701,"y":943.857178},"seed_int":0},{"name":"reroute_4","type":"reroute","parameters":{},"node_position":{"x":-7285.927246,"y":1273.717773},"seed_int":0},{"name":"blend2_6","type":"blend2","parameters":{"blend_type1":0,"amount1":0.72},"node_position":{"x":-2662.829102,"y":688.978455},"seed_int":0,"generic_size":1},{"name":"reroute_5","type":"reroute","parameters":{},"node_position":{"x":-3137.968262,"y":707.927673},"seed_int":0},{"name":"invert_2","type":"invert","parameters":{},"node_position":{"x":-3022.504639,"y":592.891541},"seed_int":0},{"name":"auto_tones","type":"auto_tones","parameters":{"param0":10},"node_position":{"x":-990.463684,"y":956.197815},"seed_int":0},{"name":"warp_4","type":"warp","parameters":{"mode":1,"amount":0.035,"eps":0.1},"node_position":{"x":-1844.734131,"y":977.964417},"seed_int":0},{"name":"buffer_5","type":"buffer","parameters":{"size":10},"node_position":{"x":-259.630737,"y":936.417236},"seed_int":0,"version":1},{"name":"transform2_3","type":"transform2","parameters":{"translate_x":"$time * 0.1","translate_y":0,"rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":85.721649,"y":931.691101},"seed_int":0,"generic_size":1},{"name":"transform2_6","type":"transform2","parameters":{"translate_x":"$time * 0.1","translate_y":"$time * 0.1","rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":69.247009,"y":1179.46228},"seed_int":0,"generic_size":1},{"name":"warp","type":"warp","parameters":{"mode":0,"amount":0.1,"eps":0.1},"node_position":{"x":355.436279,"y":1066.210815},"seed_int":0},{"name":"reroute_2","type":"reroute","parameters":{},"node_position":{"x":-3448.968506,"y":715.212952},"seed_int":0},{"name":"blend2_7","type":"blend2","parameters":{"blend_type1":0,"amount1":0.34},"node_position":{"x":-3739.871338,"y":649.089355},"seed_int":0,"generic_size":1},{"name":"comment","type":"comment","parameters":{},"node_position":{"x":-6573.166992,"y":-58.612339},"seed_int":0,"title":"gradient based waves","color":{"type":"Color","r":0,"g":0,"b":0,"a":1},"text":"","size":{"x":1560.314941,"y":567.960144}},{"name":"reroute_6","type":"reroute","parameters":{},"node_position":{"x":-4079.400635,"y":-12.325669},"seed_int":0},{"name":"combine","type":"combine","parameters":{},"node_position":{"x":-846.789001,"y":25.820663},"seed_int":0},{"name":"reroute_7","type":"reroute","parameters":{},"node_position":{"x":-6511.587891,"y":1309.807861},"seed_int":0},{"name":"comment_2","type":"comment","parameters":{},"node_position":{"x":-8107.410156,"y":1109.146729},"seed_int":0,"title":"tiler based waves","color":{"type":"Color","r":0,"g":0,"b":0,"a":1},"text":"","size":{"x":3702.679932,"y":788.311951}},{"name":"reroute_8","type":"reroute","parameters":{},"node_position":{"x":-4066.789307,"y":60.575764},"seed_int":0},{"name":"warp_7","type":"warp","parameters":{"mode":1,"amount":0.16,"eps":0.105},"node_position":{"x":-4986.087402,"y":-567.871765},"seed_int":0},{"name":"reroute_3","type":"reroute","parameters":{},"node_position":{"x":684.234436,"y":1135.488647},"seed_int":0},{"name":"reroute_9","type":"reroute","parameters":{},"node_position":{"x":-2110.296143,"y":722.166748},"seed_int":0},{"name":"reroute_10","type":"reroute","parameters":{},"node_position":{"x":-3281.54126,"y":534.281433},"seed_int":0},{"name":"reroute_11","type":"reroute","parameters":{},"node_position":{"x":-1825.509155,"y":564.373047},"seed_int":0},{"name":"reroute_12","type":"reroute","parameters":{},"node_position":{"x":-1912.690063,"y":95.612701},"seed_int":0},{"name":"reroute_13","type":"reroute","parameters":{},"node_position":{"x":-1917.024536,"y":-43.722679},"seed_int":0},{"name":"reroute_14","type":"reroute","parameters":{},"node_position":{"x":-1916.902344,"y":26.809563},"seed_int":0},{"name":"reroute_15","type":"reroute","parameters":{},"node_position":{"x":-2221.37207,"y":941.625427},"seed_int":0},{"name":"reroute_16","type":"reroute","parameters":{},"node_position":{"x":-2126.528564,"y":-416.982117},"seed_int":0},{"name":"blend2_8","type":"blend2","parameters":{"blend_type1":0,"amount1":0},"node_position":{"x":-4692.693848,"y":-643.958679},"seed_int":0,"generic_size":1},{"name":"reroute_17","type":"reroute","parameters":{},"node_position":{"x":-4148.283691,"y":-368.793365},"seed_int":0},{"name":"reroute_20","type":"reroute","parameters":{},"node_position":{"x":-5519.398926,"y":-731.908386},"seed_int":0},{"name":"blend2_9","type":"blend2","parameters":{"blend_type1":0,"amount1":0.5},"node_position":{"x":-7018.288574,"y":-720.447205},"seed_int":0,"generic_size":1},{"name":"iterate_buffer","type":"iterate_buffer","parameters":{"size":10,"shrink":false,"autostop":false,"iterations":26,"filter":true,"mipmap":true},"node_position":{"x":-6613.465332,"y":-755.800049},"seed":29168,"seed_locked":true},{"name":"reroute_21","type":"reroute","parameters":{},"node_position":{"x":-5705.331055,"y":-719.185852},"seed_int":0},{"name":"transform2_5","type":"transform2","parameters":{"translate_x":-0.01,"translate_y":0,"rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":-6378.80127,"y":-604.704895},"seed_int":0,"generic_size":1},{"name":"blend2_10","type":"blend2","parameters":{"blend_type1":0,"amount1":0.55},"node_position":{"x":-6087.875488,"y":-505.522491},"seed_int":0,"generic_size":1},{"name":"directional_noise","type":"graph","parameters":{"param0":2,"n_scale":1,"param1":8},"node_position":{"x":-6365.692871,"y":-380.89801},"seed_int":0,"label":"Directional Noise","shortdesc":"Directional Noise","longdesc":"A node to generates various composite directional noises","nodes":[{"name":"math_4","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0,"clamp":true},"node_position":{"x":-1400,"y":440},"seed_int":0},{"name":"fbm2_4","type":"fbm2","parameters":{"noise":0,"scale_x":"1.0*$n_scale","scale_y":"4.0*$n_scale","folds":0,"iterations":2,"persistence":0.68,"offset":0},"node_position":{"x":-1980,"y":340},"seed_int":4124981080},{"name":"brightness_contrast_3","type":"brightness_contrast","parameters":{"brightness":-0.27,"contrast":0.44},"node_position":{"x":-1680,"y":340},"seed_int":0},{"name":"brightness_contrast_4","type":"brightness_contrast","parameters":{"brightness":-0.23,"contrast":0.21},"node_position":{"x":-1680,"y":580},"seed_int":0},{"name":"math_2","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1120,"y":180},"seed_int":0},{"name":"perlin_2","type":"perlin","parameters":{"scale_x":"32.0*$n_scale","scale_y":"256.0*$n_scale","iterations":3,"persistence":0.9},"node_position":{"x":-1980,"y":-320},"seed_int":2366492620},{"name":"brightness_contrast_2","type":"brightness_contrast","parameters":{"brightness":0,"contrast":1},"node_position":{"x":-1680,"y":100},"seed_int":0},{"name":"math","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0,"clamp":true},"node_position":{"x":-1400,"y":-60},"seed_int":0},{"name":"fbm2","type":"fbm2","parameters":{"noise":9,"scale_x":"4.0*$n_scale","scale_y":"72.0*$n_scale","folds":0,"iterations":2,"persistence":0.5,"offset":0},"node_position":{"x":-1980,"y":99},"seed_int":0},{"name":"fbm2_2","type":"fbm2","parameters":{"noise":1,"scale_x":"2.0*$n_scale","scale_y":"4.0*$n_scale","folds":0,"iterations":1,"persistence":0.5,"offset":0},"node_position":{"x":-1980,"y":-140},"seed_int":0},{"name":"brightness_contrast","type":"brightness_contrast","parameters":{"brightness":0.17,"contrast":0.1},"node_position":{"x":-1680,"y":-140},"seed_int":0},{"name":"brightness_contrast_5","type":"brightness_contrast","parameters":{"brightness":0.06,"contrast":0.98},"node_position":{"x":-1680,"y":-320},"seed_int":0},{"name":"brightness_contrast_6","type":"brightness_contrast","parameters":{"brightness":0.31,"contrast":0.31},"node_position":{"x":-1700,"y":-560},"seed_int":0},{"name":"math_5","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1400,"y":-400},"seed_int":0},{"name":"math_3","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-800,"y":-120},"seed_int":0},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-2286.5,"y":179.852936},"seed_int":0,"ports":[]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":100,"y":-120},"seed_int":0,"ports":[{"group_size":0,"name":"port0","type":"f"}]},{"name":"gen_parameters","type":"remote","parameters":{"param0":2,"n_scale":1,"param1":8},"node_position":{"x":-1300,"y":-800},"seed_int":0,"widgets":[{"configurations":{"Noise 1":[{"node":"switch","value":0,"widget":"source"}],"Noise 2":[{"node":"switch","value":1,"widget":"source"}],"Noise 3":[{"node":"switch","value":2,"widget":"source"}]},"label":"Type","linked_widgets":[{"node":"switch","widget":"source"}],"longdesc":"The type of directional noise to generate","name":"param0","shortdesc":"Type","type":"config_control"},{"default":1,"label":"Scale","longdesc":"The scale of the noise pattern","max":8,"min":1,"name":"n_scale","shortdesc":"Scale","step":1,"type":"named_parameter"},{"label":"","linked_widgets":[{"node":"buffer_2","widget":"size"}],"longdesc":"The resolution of the output","name":"param1","shortdesc":"Resolution","type":"linked_control"}]},{"name":"fbm2_5","type":"fbm2","parameters":{"noise":9,"scale_x":"2.0*$n_scale","scale_y":"4.0*$n_scale","folds":0,"iterations":2,"persistence":0.87,"offset":0},"node_position":{"x":-1980,"y":-560},"seed_int":1881633762},{"name":"math_10","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0.75,"clamp":false},"node_position":{"x":-1140,"y":-400},"seed_int":0},{"name":"fbm2_3","type":"fbm2","parameters":{"noise":0,"scale_x":"1.0*$n_scale","scale_y":"8.0*$n_scale","folds":0,"iterations":1,"persistence":0.5,"offset":0},"node_position":{"x":-1980,"y":580},"seed_int":64720862},{"name":"comment","type":"comment","parameters":{},"node_position":{"x":-2000,"y":-600},"seed_int":0,"title":"Noise 1","color":{"type":"Color","r":0,"g":0,"b":0,"a":1},"text":"","size":{"x":1500,"y":1420}},{"name":"math_6","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1100,"y":1220},"seed_int":0},{"name":"fbm2_6","type":"fbm2","parameters":{"noise":1,"scale_x":"$n_scale","scale_y":"20.0 * $n_scale","folds":0,"iterations":3,"persistence":0.6,"offset":0},"node_position":{"x":-1980,"y":900},"seed_int":0},{"name":"brightness_contrast_7","type":"brightness_contrast","parameters":{"brightness":0.07,"contrast":0.97},"node_position":{"x":-1680,"y":900},"seed_int":0},{"name":"math_7","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-1680,"y":980},"seed_int":0},{"name":"fbm2_7","type":"fbm2","parameters":{"noise":9,"scale_x":"4.0*$n_scale","scale_y":"8.0*$n_scale","folds":0,"iterations":2,"persistence":0.5,"offset":0},"node_position":{"x":-1980,"y":1140},"seed_int":0},{"name":"fbm2_8","type":"fbm2","parameters":{"noise":9,"scale_x":"4.0*$n_scale","scale_y":"72.0*$n_scale","folds":0,"iterations":2,"persistence":0.5,"offset":0},"node_position":{"x":-1980,"y":1380},"seed_int":0},{"name":"brightness_contrast_8","type":"brightness_contrast","parameters":{"brightness":0.24,"contrast":0.26},"node_position":{"x":-1680,"y":1140},"seed_int":0},{"name":"brightness_contrast_9","type":"brightness_contrast","parameters":{"brightness":-0.08,"contrast":0.65},"node_position":{"x":-1680,"y":1400},"seed_int":0},{"name":"math_8","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1400,"y":1260},"seed_int":0},{"name":"perlin_3","type":"perlin","parameters":{"scale_x":"32.0*$n_scale","scale_y":"256.0*$n_scale","iterations":3,"persistence":0.9},"node_position":{"x":-1980,"y":1620},"seed_int":2901559646},{"name":"brightness_contrast_10","type":"brightness_contrast","parameters":{"brightness":-0.15,"contrast":0.63},"node_position":{"x":-1680,"y":1620},"seed_int":0},{"name":"math_9","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-1100,"y":1380},"seed_int":0},{"name":"math_11","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1100,"y":1540},"seed_int":0},{"name":"tones","type":"tones","parameters":{"in_min":{"type":"Color","r":0.275,"g":0.275,"b":0.275,"a":0},"in_mid":{"type":"Color","r":0.64375,"g":0.64375,"b":0.64375,"a":0.5},"in_max":{"type":"Color","r":1,"g":1,"b":1,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":-800,"y":1360},"seed_int":0},{"name":"switch","type":"switch","parameters":{"outputs":1,"choices":3,"source":2},"node_position":{"x":-400,"y":-120},"seed_int":0},{"name":"comment_2","type":"comment","parameters":{},"node_position":{"x":-2000,"y":860},"seed_int":0,"title":"Noise 2","color":{"type":"Color","r":0,"g":0,"b":0,"a":1},"text":"","size":{"x":1500,"y":920}},{"name":"buffer_2","type":"buffer","parameters":{"size":8},"node_position":{"x":-200,"y":-120},"seed_int":0,"version":1},{"name":"math_14","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1100,"y":2040},"seed_int":0},{"name":"tiler_2","type":"shader","parameters":{"tx":"16.0*$n_scale","ty":"16.0*$n_scale","overlap":2,"inputs":0,"scale_x":"0.2/$n_scale","scale_y":"0.04/$n_scale","fixed_offset":0,"offset":1,"rotate":0,"scale":0,"value":1,"variations":false},"node_position":{"x":-1680,"y":2000},"seed_int":1424004997,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"shape_2","type":"shape","parameters":{"shape":0,"sides":5,"radius":1,"edge":1},"node_position":{"x":-1980,"y":1840},"seed_int":0},{"name":"math_12","type":"math","parameters":{"op":20,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1800,"y":1840},"seed_int":0},{"name":"tiler_3","type":"shader","parameters":{"tx":"26.0*$n_scale","ty":"26.0*$n_scale","overlap":2,"inputs":0,"scale_x":"0.14/$n_scale","scale_y":"0.02/$n_scale","fixed_offset":0,"offset":1,"rotate":0,"scale":0,"value":1,"variations":false},"node_position":{"x":-1980,"y":2380},"seed_int":0,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"tiler_4","type":"shader","parameters":{"tx":"64.0*$n_scale","ty":"64.0*$n_scale","overlap":3,"inputs":0,"scale_x":"0.08/$n_scale","scale_y":"0.01/$n_scale","fixed_offset":0,"offset":1,"rotate":0,"scale":0,"value":1,"variations":false},"node_position":{"x":-1680,"y":2380},"seed_int":0,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"math_16","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1100,"y":2240},"seed_int":0},{"name":"tiler_5","type":"shader","parameters":{"tx":"8.0*$n_scale","ty":"8.0*$n_scale","overlap":2,"inputs":0,"scale_x":"0.34/$n_scale","scale_y":"0.07/$n_scale","fixed_offset":0,"offset":1,"rotate":0,"scale":0.27,"value":1,"variations":false},"node_position":{"x":-1980,"y":2000},"seed_int":0,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"math_17","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-1100,"y":1840},"seed_int":0},{"name":"brightness_contrast_11","type":"brightness_contrast","parameters":{"brightness":0.21,"contrast":0.25},"node_position":{"x":-800,"y":1840},"seed_int":0},{"name":"comment_3","type":"comment","parameters":{},"node_position":{"x":-2000,"y":1800},"seed_int":0,"title":"Noise 3","color":{"type":"Color","r":0,"g":0,"b":0,"a":1},"text":"","size":{"x":1500,"y":960}},{"name":"math_13","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-1400,"y":2000},"seed_int":0},{"name":"math_15","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0.25,"clamp":false},"node_position":{"x":-1400,"y":2160},"seed_int":0},{"name":"math_18","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0.125,"clamp":false},"node_position":{"x":-1400,"y":2320},"seed_int":0}],"connections":[{"from":"fbm2_2","from_port":0,"to":"brightness_contrast","to_port":0},{"from":"fbm2","from_port":0,"to":"brightness_contrast_2","to_port":0},{"from":"fbm2_4","from_port":0,"to":"brightness_contrast_3","to_port":0},{"from":"math_2","from_port":0,"to":"math_3","to_port":1},{"from":"perlin_2","from_port":0,"to":"brightness_contrast_5","to_port":0},{"from":"brightness_contrast_2","from_port":0,"to":"math","to_port":1},{"from":"brightness_contrast","from_port":0,"to":"math","to_port":0},{"from":"math","from_port":0,"to":"math_2","to_port":0},{"from":"brightness_contrast_3","from_port":0,"to":"math_4","to_port":0},{"from":"brightness_contrast_4","from_port":0,"to":"math_4","to_port":1},{"from":"math_4","from_port":0,"to":"math_2","to_port":1},{"from":"brightness_contrast_5","from_port":0,"to":"math_5","to_port":1},{"from":"brightness_contrast_6","from_port":0,"to":"math_5","to_port":0},{"from":"fbm2_5","from_port":0,"to":"brightness_contrast_6","to_port":0},{"from":"math_5","from_port":0,"to":"math_10","to_port":0},{"from":"math_10","from_port":0,"to":"math_3","to_port":0},{"from":"fbm2_3","from_port":0,"to":"brightness_contrast_4","to_port":0},{"from":"fbm2_6","from_port":0,"to":"brightness_contrast_7","to_port":0},{"from":"brightness_contrast_7","from_port":0,"to":"math_7","to_port":0},{"from":"math_7","from_port":0,"to":"math_6","to_port":0},{"from":"fbm2_7","from_port":0,"to":"brightness_contrast_8","to_port":0},{"from":"fbm2_8","from_port":0,"to":"brightness_contrast_9","to_port":0},{"from":"brightness_contrast_9","from_port":0,"to":"math_8","to_port":1},{"from":"brightness_contrast_8","from_port":0,"to":"math_8","to_port":0},{"from":"math_8","from_port":0,"to":"math_6","to_port":1},{"from":"perlin_3","from_port":0,"to":"brightness_contrast_10","to_port":0},{"from":"math_9","from_port":0,"to":"math_11","to_port":0},{"from":"brightness_contrast_10","from_port":0,"to":"math_11","to_port":1},{"from":"math_6","from_port":0,"to":"math_9","to_port":0},{"from":"math_11","from_port":0,"to":"tones","to_port":0},{"from":"math_3","from_port":0,"to":"switch","to_port":0},{"from":"tones","from_port":0,"to":"switch","to_port":1},{"from":"switch","from_port":0,"to":"buffer_2","to_port":0},{"from":"buffer_2","from_port":0,"to":"gen_outputs","to_port":0},{"from":"shape_2","from_port":0,"to":"math_12","to_port":0},{"from":"math_12","from_port":0,"to":"tiler_2","to_port":0},{"from":"math_12","from_port":0,"to":"tiler_3","to_port":0},{"from":"math_12","from_port":0,"to":"tiler_4","to_port":0},{"from":"math_14","from_port":0,"to":"math_16","to_port":0},{"from":"math_12","from_port":0,"to":"tiler_5","to_port":0},{"from":"tiler_5","from_port":0,"to":"math_17","to_port":0},{"from":"math_17","from_port":0,"to":"math_14","to_port":0},{"from":"math_16","from_port":0,"to":"brightness_contrast_11","to_port":0},{"from":"brightness_contrast_11","from_port":0,"to":"switch","to_port":2},{"from":"tiler_2","from_port":0,"to":"math_13","to_port":0},{"from":"math_13","from_port":0,"to":"math_17","to_port":1},{"from":"tiler_3","from_port":0,"to":"math_15","to_port":0},{"from":"math_15","from_port":0,"to":"math_14","to_port":1},{"from":"tiler_4","from_port":0,"to":"math_18","to_port":0},{"from":"math_18","from_port":0,"to":"math_16","to_port":1}]},{"name":"buffer_4","type":"buffer","parameters":{"size":10},"node_position":{"x":-323.842896,"y":697.660767},"seed_int":0,"version":1},{"name":"reroute_22","type":"reroute","parameters":{},"node_position":{"x":-1902.932617,"y":168.617477},"seed_int":0},{"name":"reroute_18","type":"reroute","parameters":{},"node_position":{"x":-47.646473,"y":499.406616},"seed_int":0},{"name":"transform2_7","type":"transform2","parameters":{"translate_x":"$time * 0.1","translate_y":0,"rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":83.347069,"y":443.475555},"seed_int":0,"generic_size":1},{"name":"transform2_8","type":"transform2","parameters":{"translate_x":"$time * 0.1","translate_y":"$time * 0.1","rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":95.599487,"y":679.756104},"seed_int":0,"generic_size":1},{"name":"warp_8","type":"warp","parameters":{"mode":0,"amount":0.1,"eps":0.1},"node_position":{"x":356.282715,"y":571.704102},"seed_int":0},{"name":"reroute_19","type":"reroute","parameters":{},"node_position":{"x":687.439636,"y":987.388489},"seed_int":0},{"name":"reroute_23","type":"reroute","parameters":{},"node_position":{"x":1159.9552,"y":968.595276},"seed_int":0},{"name":"decompose","type":"decompose","parameters":{},"node_position":{"x":1424.125854,"y":989.014771},"seed_int":0},{"name":"combine_2","type":"combine","parameters":{},"node_position":{"x":-565.419373,"y":953.872437},"seed_int":0},{"name":"reroute_24","type":"reroute","parameters":{},"node_position":{"x":2614.883545,"y":1265.94165},"seed_int":0},{"name":"decompose_2","type":"decompose","parameters":{},"node_position":{"x":1420.864868,"y":1217.96582},"seed_int":0},{"name":"blend2_12","type":"blend2","parameters":{"blend_type1":0,"amount1":1},"node_position":{"x":3240.838135,"y":855.246521},"seed_int":0,"generic_size":1},{"name":"clouds_noise","type":"graph","parameters":{"param1":0,"n_scale":1,"param0":11},"node_position":{"x":1530.827271,"y":617.270386},"seed_int":0,"label":"Clouds","shortdesc":"Clouds","longdesc":"A node to generate various composite cloud noises","nodes":[{"name":"math","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-900,"y":380},"seed_int":0},{"name":"math_3","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-898.5,"y":220.5},"seed_int":0},{"name":"tiler_2","type":"shader","parameters":{"tx":"16.0*$n_scale","ty":"16.0*$n_scale","overlap":2,"inputs":0,"scale_x":"0.07/$n_scale","scale_y":"0.18/$n_scale","fixed_offset":0,"offset":1,"rotate":180,"scale":0.2,"value":0.52,"variations":false},"node_position":{"x":-1200,"y":600},"seed_int":1916624861,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"buffer_3","type":"buffer","parameters":{"size":11},"node_position":{"x":-900,"y":1260},"seed_int":0,"version":1},{"name":"tiler","type":"shader","parameters":{"tx":"8.0*$n_scale","ty":"8.0*$n_scale","overlap":2,"inputs":0,"scale_x":"0.15/$n_scale","scale_y":"0.36/$n_scale","fixed_offset":0,"offset":1,"rotate":180,"scale":0.2,"value":0.76,"variations":false},"node_position":{"x":-1200,"y":200},"seed_int":0,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"math_6","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-580.5,"y":972.5},"seed_int":0},{"name":"tiler_5","type":"shader","parameters":{"tx":"128.0*$n_scale","ty":"128.0*$n_scale","overlap":2,"inputs":0,"scale_x":"0.005/$n_scale","scale_y":"0.02/$n_scale","fixed_offset":0,"offset":1,"rotate":180,"scale":0.2,"value":0.52,"variations":false},"node_position":{"x":-1200,"y":1640},"seed_int":993056568,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"math_9","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-900,"y":1620},"seed_int":0},{"name":"math_4","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-600,"y":1260},"seed_int":0},{"name":"tiler_3","type":"shader","parameters":{"tx":"5.0*$n_scale","ty":"5.0*$n_scale","overlap":2,"inputs":0,"scale_x":"0.31/$n_scale","scale_y":"0.8/$n_scale","fixed_offset":0,"offset":1,"rotate":180,"scale":0,"value":1,"variations":false},"node_position":{"x":-1200,"y":-200},"seed_int":1305240561,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"brightness_contrast_6","type":"brightness_contrast","parameters":{"brightness":1,"contrast":1.63},"node_position":{"x":-600,"y":2800},"seed_int":0},{"name":"invert","type":"invert","parameters":{},"node_position":{"x":-600,"y":2900},"seed_int":0},{"name":"invert_2","type":"invert","parameters":{},"node_position":{"x":-600,"y":3140},"seed_int":0},{"name":"math_12","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-900,"y":2800},"seed_int":0},{"name":"fbm2_2","type":"fbm2","parameters":{"noise":1,"scale_x":"12.0*$n_scale","scale_y":"12.0*$n_scale","folds":0,"iterations":5,"persistence":0.5,"offset":0},"node_position":{"x":-1200,"y":3040},"seed_int":1932275722},{"name":"fbm2_5","type":"fbm2","parameters":{"noise":9,"scale_x":"24.0*$n_scale","scale_y":"24.0*$n_scale","folds":1,"iterations":5,"persistence":0.5,"offset":0.01},"node_position":{"x":-1200,"y":2800},"seed_int":3448588156},{"name":"math_7","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0.87,"clamp":false},"node_position":{"x":-320,"y":980},"seed_int":0},{"name":"math_5","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-340,"y":1240},"seed_int":0},{"name":"brightness_contrast_2","type":"brightness_contrast","parameters":{"brightness":-0.42,"contrast":0.07},"node_position":{"x":-600,"y":1440},"seed_int":0},{"name":"math_20","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-900,"y":2140},"seed_int":0},{"name":"math_21","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-900,"y":2400},"seed_int":0},{"name":"brightness_contrast_5","type":"brightness_contrast","parameters":{"brightness":1,"contrast":2},"node_position":{"x":-600,"y":2140},"seed_int":0},{"name":"math_13","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-900,"y":3040},"seed_int":0},{"name":"fbm2","type":"fbm2","parameters":{"noise":1,"scale_x":"4.0*$n_scale","scale_y":"4.0*$n_scale","folds":0,"iterations":2,"persistence":0.5,"offset":0},"node_position":{"x":-900,"y":1000},"seed_int":0},{"name":"math_11","type":"math","parameters":{"op":19,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-600,"y":2980},"seed_int":0},{"name":"brightness_contrast_3","type":"brightness_contrast","parameters":{"brightness":-0.32,"contrast":0.53},"node_position":{"x":-600,"y":3220},"seed_int":0},{"name":"math_10","type":"math","parameters":{"op":19,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-600,"y":2400},"seed_int":0},{"name":"fbm2_3","type":"fbm2","parameters":{"noise":1,"scale_x":"4.0*$n_scale","scale_y":"4.0*$n_scale","folds":0,"iterations":5,"persistence":0.64,"offset":0},"node_position":{"x":-1200,"y":2400},"seed_int":0},{"name":"fbm2_4","type":"fbm2","parameters":{"noise":9,"scale_x":"8.0*$n_scale","scale_y":"8.0*$n_scale","folds":0,"iterations":7,"persistence":0.69,"offset":0},"node_position":{"x":-1200,"y":2140},"seed_int":0},{"name":"brightness_contrast_4","type":"brightness_contrast","parameters":{"brightness":-0.39,"contrast":1.74},"node_position":{"x":-300,"y":2140},"seed_int":0},{"name":"brightness_contrast","type":"brightness_contrast","parameters":{"brightness":0.34,"contrast":0.09},"node_position":{"x":-600,"y":400},"seed_int":0},{"name":"tiler_4","type":"shader","parameters":{"tx":"64.0*$n_scale","ty":"64.0*$n_scale","overlap":2,"inputs":0,"scale_x":"0.01/$n_scale","scale_y":"0.04/$n_scale","fixed_offset":0,"offset":1,"rotate":180,"scale":0.2,"value":0.52,"variations":false},"node_position":{"x":-1200,"y":1260},"seed_int":1916624861,"shader_model":{"code":"vec3 $(name_uv)_instance_uv = vec3(0.0);\nvec4 $(name_uv)_rch = tiler_$(name)($uv, vec2($tx, $ty), int($overlap), $(name_uv)_instance_uv, vec2(float($seed)));","global":"","includes":["custom_uv"],"inputs":[{"default":"0.0","function":true,"label":"","longdesc":"The input image or atlas of 4 or 16 input images","name":"in","shortdesc":"Input","type":"f"},{"default":"1.0","function":true,"label":"","longdesc":"The mask applied to the pattern","name":"mask","shortdesc":"Mask","type":"f"}],"instance":"vec4 tiler_$(name)(vec2 uv, vec2 tile, int overlap, inout vec3 instance_uv, vec2 _seed) {\n\tfloat c = 0.0;\n\tvec3 rc = vec3(0.0);\n\tvec3 rc1;\n\tfor (int dx = -overlap; dx <= overlap; ++dx) {\n\t\tfor (int dy = -overlap; dy <= overlap; ++dy) {\n\t\t\tvec2 pos = uv*tile+vec2(float(dx), float(dy)); pos = fract((floor(mod(pos, tile))+vec2(0.5))/tile)-vec2(0.5);\n\t\t\tvec2 seed = rand2(pos+_seed);\n\t\t\trc1 = rand3(seed);\n\t\t\tfloat uv_rand = rand(seed.yx);\n\t\t\tpos = fract(pos+vec2($fixed_offset/tile.x, 0.0)*floor(mod(pos.y*tile.y, 2.0))+$offset*seed/tile);\n\t\t\tfloat mask = $mask(fract(pos+vec2(0.5)));\n\t\t\tif (mask > 0.01) {\n\t\t\t\tvec2 pv = fract(uv - pos)-vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tfloat angle = (seed.x * 2.0 - 1.0) * $rotate * 0.01745329251;\n\t\t\t\tfloat ca = cos(angle);\n\t\t\t\tfloat sa = sin(angle);\n\t\t\t\tpv = vec2(ca*pv.x+sa*pv.y, -sa*pv.x+ca*pv.y);\n\t\t\t\tpv *= (seed.y-0.5)*2.0*$scale+1.0;\n\t\t\t\tpv /= vec2($scale_x, $scale_y);\n\t\t\t\tpv += vec2(0.5);\n\t\t\t\tseed = rand2(seed);\n\t\t\t\tvec2 clamped_pv = clamp(pv, vec2(0.0), vec2(1.0));\n\t\t\t\tif (pv.x != clamped_pv.x || pv.y != clamped_pv.y) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvec2 full_uv = pv;\n\t\t\t\tpv = get_from_tileset($inputs, uv_rand, pv);\n\t\t\t\tfloat c1 = $in.variation(pv, $variations ? seed.x : 0.0)*mask*  ((1.0-$value*seed.x) - 0.5) * 2.0;\n\t\t\t\t//c1 = (c1 - 0.5) * 2.0;\n\t\t\t\tc += c1;\n\t\t\t\trc = mix(rc, rc1, step(c, c1));\n\t\t\t\tinstance_uv = mix(instance_uv, vec3(full_uv, uv_rand), step(c, c1));\n\t\t\t}\n\t\t}\n\t}\n\treturn vec4(rc, c);\n}","longdesc":"Tiles several occurences of an input image while adding randomness.","name":"Tiler","outputs":[{"f":"$(name_uv)_rch.a","longdesc":"Shows the generated pattern","shortdesc":"Output","type":"f"},{"longdesc":"Shows a random color for each instance of the input image","rgb":"$(name_uv)_rch.rgb","shortdesc":"Instance map","type":"rgb"},{"longdesc":"Per instance UVs. Can be used with Custom UV node.","rgb":"$(name_uv)_instance_uv","shortdesc":"Instance UV","type":"rgb"}],"parameters":[{"control":"None","default":4,"label":"Tile X","longdesc":"The number of columns of the tiles pattern","max":64,"min":1,"name":"tx","shortdesc":"Tile.x","step":1,"type":"float"},{"control":"None","default":4,"label":"Tile Y","longdesc":"The number of rows of the tiles pattern","max":64,"min":1,"name":"ty","shortdesc":"Tile.y","step":1,"type":"float"},{"control":"None","default":1,"label":"Overlap","longdesc":"The number of neighbour tiles an instance of the input image can overlap. Set this parameter to the lowest value that generates the expected result (where all instances are fully visible) to improve performance.","max":5,"min":0,"name":"overlap","shortdesc":"Overlap","step":1,"type":"float"},{"default":0,"label":"Inputs","longdesc":"The input type of the node:\n- 1: single image\n- 4: atlas of 4 images\n- 16: atlas of 16 images\nAtlases can be created using the Tile2x2 node.","name":"inputs","shortdesc":"Input","type":"enum","values":[{"name":"1","value":" 1.0"},{"name":"4","value":"2.0"},{"name":"16","value":"4.0"}]},{"control":"None","default":1,"label":"Scale X","longdesc":"The scale of input images on the X axis","max":2,"min":0,"name":"scale_x","shortdesc":"Scale.x","step":0.01,"type":"float"},{"control":"None","default":1,"label":"Scale Y","longdesc":"The scale of input images on the Y axis","max":2,"min":0,"name":"scale_y","shortdesc":"Scale.y","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Fixed Offset","longdesc":"The relative offset of odd rows","max":1,"min":0,"name":"fixed_offset","shortdesc":"FixedOffset","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Offset","max":1,"min":0,"name":"offset","step":0.01,"type":"float"},{"control":"None","default":0,"label":"Rnd Rotate","longdesc":"The random rotation applied to each image instance","max":180,"min":0,"name":"rotate","shortdesc":"RndRotate","step":0.1,"type":"float"},{"control":"None","default":0,"label":"Rnd Scale","longdesc":"The random scale applied to each image instance","max":1,"min":0,"name":"scale","shortdesc":"RndScale","step":0.01,"type":"float"},{"control":"None","default":0.5,"label":"Rnd Value","longdesc":"The random grayscale value applied to each image instance","max":1,"min":0,"name":"value","shortdesc":"RndValue","step":0.01,"type":"float"},{"default":false,"label":"Variations","longdesc":"Check to tile variations of the input","name":"variations","shortdesc":"Variations","type":"boolean"}],"shortdesc":"Tiler"}},{"name":"shape","type":"shape","parameters":{"shape":1,"sides":4,"radius":1,"edge":1},"node_position":{"x":-1600,"y":-200},"seed_int":0},{"name":"math_18","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-200,"y":2800},"seed_int":0},{"name":"math_8","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-280,"y":580},"seed_int":0},{"name":"math_2","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-600,"y":540},"seed_int":0},{"name":"buffer_2","type":"buffer","parameters":{"size":11},"node_position":{"x":-900,"y":560},"seed_int":0,"version":1},{"name":"transform2","type":"transform2","parameters":{"translate_x":0,"translate_y":0,"rotate":45,"scale_x":0.353,"scale_y":0.353,"mode":1},"node_position":{"x":-900,"y":640},"seed_int":0,"generic_size":1},{"name":"transform2_2","type":"transform2","parameters":{"translate_x":0,"translate_y":0,"rotate":45,"scale_x":0.353,"scale_y":0.353,"mode":1},"node_position":{"x":-900,"y":1360},"seed_int":0,"generic_size":1},{"name":"math_17","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-200,"y":3400},"seed_int":0},{"name":"math_19","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":0.06,"clamp":false},"node_position":{"x":-200,"y":3560},"seed_int":0},{"name":"noise_white","type":"noise_white","parameters":{"size":11},"node_position":{"x":-500,"y":3400},"seed_int":0},{"name":"fbm2_9","type":"fbm2","parameters":{"noise":9,"scale_x":"16.0*$n_scale","scale_y":"16.0*$n_scale","folds":0,"iterations":5,"persistence":0.7,"offset":0},"node_position":{"x":-1200,"y":3400},"seed_int":2673982214},{"name":"math_14","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-900,"y":3400},"seed_int":0},{"name":"math_22","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":2.81,"clamp":false},"node_position":{"x":-900,"y":3560},"seed_int":0},{"name":"math_16","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-900,"y":3720},"seed_int":0},{"name":"fbm2_6","type":"fbm2","parameters":{"noise":9,"scale_x":"8.0*$n_scale","scale_y":"8.0*$n_scale","folds":0,"iterations":5,"persistence":0.7,"offset":0},"node_position":{"x":-1200,"y":3640},"seed_int":756464000},{"name":"fbm2_7","type":"fbm2","parameters":{"noise":9,"scale_x":"4.0*$n_scale","scale_y":"4.0*$n_scale","folds":0,"iterations":5,"persistence":0.64,"offset":0},"node_position":{"x":-1200,"y":3900},"seed_int":2746515622},{"name":"math_23","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0.5,"clamp":false},"node_position":{"x":-900,"y":3900},"seed_int":0},{"name":"math_24","type":"math","parameters":{"op":2,"default_in1":0,"default_in2":2,"clamp":false},"node_position":{"x":-900,"y":4060},"seed_int":0},{"name":"math_25","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-900,"y":4220},"seed_int":0},{"name":"tones","type":"tones","parameters":{"in_min":{"type":"Color","r":0.3125,"g":0.3125,"b":0.3125,"a":0},"in_mid":{"type":"Color","r":0.65625,"g":0.65625,"b":0.65625,"a":0.5},"in_max":{"type":"Color","r":1,"g":1,"b":1,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":-200,"y":2960},"seed_int":0},{"name":"math_15","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-200,"y":3720},"seed_int":0},{"name":"brightness_contrast_7","type":"brightness_contrast","parameters":{"brightness":-0.67,"contrast":0.29},"node_position":{"x":-600,"y":3600},"seed_int":0},{"name":"math_26","type":"math","parameters":{"op":20,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-600,"y":3760},"seed_int":0},{"name":"buffer_4","type":"buffer","parameters":{"size":11},"node_position":{"x":400,"y":600},"seed_int":0,"version":1},{"name":"switch","type":"switch","parameters":{"outputs":1,"choices":3,"source":0},"node_position":{"x":100,"y":600},"seed_int":0},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-1820,"y":1560},"seed_int":0,"ports":[]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":800,"y":600},"seed_int":0,"minimized":true,"ports":[{"longdesc":"The grayscale noise output","name":"out","shortdesc":"Output","type":"f"}]},{"name":"gen_parameters","type":"remote","parameters":{"param1":0,"n_scale":1,"param0":11},"node_position":{"x":-600,"y":-520},"seed_int":0,"widgets":[{"configurations":{"Clouds 1":[{"node":"switch","value":0,"widget":"source"}],"Clouds 2":[{"node":"switch","value":1,"widget":"source"}],"Clouds 3":[{"node":"switch","value":2,"widget":"source"}]},"label":"Type","linked_widgets":[{"node":"switch","widget":"source"}],"longdesc":"The type of clouds noise to generate","name":"param1","shortdesc":"Type","type":"config_control"},{"default":1,"label":"Scale","longdesc":"The scale of the noise pattern","max":8,"min":1,"name":"n_scale","shortdesc":"Scale","step":1,"type":"named_parameter"},{"label":"","linked_widgets":[{"node":"buffer_2","widget":"size"},{"node":"buffer_4","widget":"size"},{"node":"buffer_3","widget":"size"},{"node":"noise_white","widget":"size"},{"node":"fast_blur","widget":"param0"}],"longdesc":"The resolution of the output","name":"param0","shortdesc":"Resolution","type":"linked_control"}]},{"name":"fast_blur","type":"fast_blur","parameters":{"param0":11,"param1":8,"param2":1,"param3":1},"node_position":{"x":-600,"y":3920},"seed_int":0},{"name":"math_27","type":"math","parameters":{"op":1,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-600,"y":4060},"seed_int":0},{"name":"math_28","type":"math","parameters":{"op":0,"default_in1":0,"default_in2":0,"clamp":false},"node_position":{"x":-600,"y":4220},"seed_int":0}],"connections":[{"from":"shape","from_port":0,"to":"tiler","to_port":0},{"from":"shape","from_port":0,"to":"tiler_2","to_port":0},{"from":"tiler_2","from_port":0,"to":"math","to_port":1},{"from":"transform2","from_port":0,"to":"math_2","to_port":1},{"from":"math_2","from_port":0,"to":"brightness_contrast","to_port":0},{"from":"shape","from_port":0,"to":"tiler_3","to_port":0},{"from":"tiler_3","from_port":0,"to":"math_3","to_port":0},{"from":"tiler","from_port":0,"to":"math_3","to_port":1},{"from":"math_3","from_port":0,"to":"math","to_port":0},{"from":"math","from_port":0,"to":"buffer_2","to_port":0},{"from":"buffer_2","from_port":0,"to":"transform2","to_port":0},{"from":"buffer_2","from_port":0,"to":"math_2","to_port":0},{"from":"buffer_3","from_port":0,"to":"transform2_2","to_port":0},{"from":"buffer_3","from_port":0,"to":"math_4","to_port":0},{"from":"transform2_2","from_port":0,"to":"math_4","to_port":1},{"from":"math_4","from_port":0,"to":"math_5","to_port":0},{"from":"math_5","from_port":0,"to":"brightness_contrast_2","to_port":0},{"from":"fbm2","from_port":0,"to":"math_6","to_port":0},{"from":"math_6","from_port":0,"to":"math_7","to_port":0},{"from":"math_7","from_port":0,"to":"math_5","to_port":1},{"from":"brightness_contrast","from_port":0,"to":"math_8","to_port":0},{"from":"brightness_contrast_2","from_port":0,"to":"math_8","to_port":1},{"from":"tiler_4","from_port":0,"to":"math_9","to_port":0},{"from":"tiler_5","from_port":0,"to":"math_9","to_port":1},{"from":"math_9","from_port":0,"to":"buffer_3","to_port":0},{"from":"math_8","from_port":0,"to":"switch","to_port":0},{"from":"brightness_contrast_4","from_port":0,"to":"math_18","to_port":0},{"from":"math_18","from_port":0,"to":"tones","to_port":0},{"from":"brightness_contrast_3","from_port":0,"to":"math_18","to_port":1},{"from":"math_12","from_port":0,"to":"math_13","to_port":0},{"from":"fbm2_2","from_port":0,"to":"math_13","to_port":1},{"from":"fbm2_3","from_port":0,"to":"math_21","to_port":1},{"from":"fbm2_4","from_port":0,"to":"math_20","to_port":0},{"from":"math_20","from_port":0,"to":"math_21","to_port":0},{"from":"math_10","from_port":0,"to":"brightness_contrast_4","to_port":0},{"from":"math_21","from_port":0,"to":"brightness_contrast_5","to_port":0},{"from":"brightness_contrast_5","from_port":0,"to":"math_10","to_port":0},{"from":"tones","from_port":0,"to":"switch","to_port":1},{"from":"invert","from_port":0,"to":"math_11","to_port":0},{"from":"math_11","from_port":0,"to":"invert_2","to_port":0},{"from":"fbm2_5","from_port":0,"to":"math_12","to_port":0},{"from":"math_13","from_port":0,"to":"brightness_contrast_6","to_port":0},{"from":"brightness_contrast_6","from_port":0,"to":"invert","to_port":0},{"from":"invert_2","from_port":0,"to":"brightness_contrast_3","to_port":0},{"from":"shape","from_port":0,"to":"tiler_4","to_port":0},{"from":"shape","from_port":0,"to":"tiler_5","to_port":0},{"from":"noise_white","from_port":0,"to":"math_17","to_port":0},{"from":"math_17","from_port":0,"to":"math_19","to_port":0},{"from":"math_19","from_port":0,"to":"math_15","to_port":0},{"from":"fbm2_9","from_port":0,"to":"math_14","to_port":0},{"from":"fbm2_6","from_port":0,"to":"math_16","to_port":0},{"from":"math_14","from_port":0,"to":"math_22","to_port":0},{"from":"math_22","from_port":0,"to":"math_16","to_port":1},{"from":"math_23","from_port":0,"to":"math_24","to_port":0},{"from":"math_24","from_port":0,"to":"math_25","to_port":1},{"from":"fbm2_7","from_port":0,"to":"math_23","to_port":0},{"from":"math_16","from_port":0,"to":"math_25","to_port":0},{"from":"math_25","from_port":0,"to":"brightness_contrast_7","to_port":0},{"from":"brightness_contrast_7","from_port":0,"to":"math_26","to_port":0},{"from":"math_15","from_port":0,"to":"switch","to_port":2},{"from":"switch","from_port":0,"to":"buffer_4","to_port":0},{"from":"buffer_4","from_port":0,"to":"gen_outputs","to_port":0},{"from":"math_26","from_port":0,"to":"fast_blur","to_port":0},{"from":"math_26","from_port":0,"to":"math_27","to_port":0},{"from":"fast_blur","from_port":0,"to":"math_27","to_port":1},{"from":"math_26","from_port":0,"to":"math_28","to_port":0},{"from":"math_27","from_port":0,"to":"math_28","to_port":1},{"from":"math_28","from_port":0,"to":"math_15","to_port":1}]},{"name":"classic_kuwahara","type":"graph","parameters":{"resolution":10,"size":5,"buffer":1},"node_position":{"x":1728.107666,"y":606.09375},"seed_int":0,"label":"Classic Kuwahara","shortdesc":"Classic Kuwahara Filter","longdesc":"Simple edge-preserving smoothing filter","nodes":[{"name":"gen_parameters","type":"remote","parameters":{"resolution":10,"size":5,"buffer":1},"node_position":{"x":-723.910156,"y":-199.916687},"seed":56582,"widgets":[{"label":"","linked_widgets":[{"node":"buffer_2","widget":"size"},{"node":"shader_1","widget":"s"}],"longdesc":"Resolution used to sample the input","name":"resolution","shortdesc":"Resolution","type":"linked_control"},{"label":"Size","linked_widgets":[{"node":"shader_1","widget":"size"}],"longdesc":"Size of the filter","name":"size","shortdesc":"Size","type":"linked_control"},{"configurations":{"False":[{"node":"switch","value":0,"widget":"source"}],"True":[{"node":"switch","value":1,"widget":"source"}]},"label":"Buffer","linked_widgets":[{"node":"switch","widget":"source"}],"longdesc":"When set, a buffer is used to sample the input before the kuwahara filter","name":"buffer","shortdesc":"Buffer","type":"config_control"}]},{"name":"gen_outputs","type":"ios","parameters":{},"node_position":{"x":-379.663818,"y":17.047363},"seed":-6314,"ports":[{"group_size":0,"longdesc":"Filtered Image","name":"out","shortdesc":"Output","type":"rgb"}]},{"name":"gen_inputs","type":"ios","parameters":{},"node_position":{"x":-981.910156,"y":31.047363},"seed":12483,"seed_locked":true,"ports":[{"group_size":0,"longdesc":"Input image","name":"in","shortdesc":"Input","type":"rgb"}]},{"name":"switch","type":"switch","parameters":{"outputs":1,"choices":2,"source":1},"node_position":{"x":-621.5,"y":133.297363},"seed":-53264},{"name":"shader_1","type":"shader","parameters":{"s":10,"size":5},"node_position":{"x":-599.996094,"y":16.618835},"seed_int":0,"shader_model":{"code":"","global":"","inputs":[{"default":"vec3(0.0)","function":true,"label":"","name":"in","type":"rgb"}],"instance":"// License: GPLv3 / Jan Eric Kyprianidis <www.kyprianidis.com>\n// Source: https://code.google.com/archive/p/gpuakf/\nvec3 $(name)_classic_kuwahara(vec2 uv, int radius) {\n\tfloat n = float((radius + 1) * (radius + 1));\n\tvec3 col = vec3(0.0);\n\n\tvec3 m[4];\n\tvec3 s[4];\n\tfor (int k = 0; k < 4; ++k) {\n\t  m[k] = vec3(0.0);\n\t  s[k] = vec3(0.0);\n\t}\n\n\tfor (int j = -radius; j <= 0; ++j)  {\n\t\tfor (int i = -radius; i <= 0; ++i)  {\n\t\t   vec3 c = $in(uv + vec2(float(i),float(j)) * 1.0/$s).rgb;\n\t\t   m[0] += c;\n\t\t   s[0] += c * c;\n\t\t}\n\t}\n\n\tfor (int j = -radius; j <= 0; ++j)  {\n\t\tfor (int i = 0; i <= radius; ++i)  {\n\t\t\tvec3 c = $in(uv + vec2(float(i),float(j)) * 1.0/$s).rgb;\n\t\t\tm[1] += c;\n\t\t\ts[1] += c * c;\n\t\t}\n\t}\n\n\tfor (int j = 0; j <= radius; ++j)  {\n\t\tfor (int i = 0; i <= radius; ++i)  {\n\t\t   vec3 c = $in(uv + vec2(float(i),float(j)) * 1.0/$s).rgb;\n\t\t   m[2] += c;\n\t\t   s[2] += c * c;\n\t\t}\n\t}\n\n\tfor (int j = 0; j <= radius; ++j)  {\n\t\tfor (int i = -radius; i <= 0; ++i)  {\n\t\t\tvec3 c = $in(uv + vec2(float(i),float(j)) * 1.0/$s).rgb;\n\t\t\tm[3] += c;\n\t\t\ts[3] += c * c;\n\t\t}\n\t}\n\n\tfloat min_sigma2 = 1e+2;\n\tfor (int k = 0; k < 4; ++k) {\n\t\tm[k] /= n;\n\t\ts[k] = abs(s[k] / n - m[k] * m[k]);\n\n\t\tfloat sigma2 = s[k].r + s[k].g + s[k].b;\n\t\tif (sigma2 < min_sigma2) {\n\t\t\tmin_sigma2 = sigma2;\n\t\t\tcol = m[k];\n\t\t}\n\t}\n\treturn col;\n}","name":"classic_kuwahara","outputs":[{"rgb":"$(name)_classic_kuwahara($uv, int(max($size,0.0)))","type":"rgb"}],"parameters":[{"default":10,"first":4,"label":"","last":13,"name":"s","type":"size"},{"control":"None","default":6,"label":"Size","longdesc":"Size of the filter","max":100,"min":1,"name":"size","shortdesc":"Size","step":1,"type":"float"}]}},{"name":"buffer_2","type":"buffer","parameters":{"size":10},"node_position":{"x":-878.496094,"y":140.618835},"seed_int":0,"version":1}],"connections":[{"from":"gen_inputs","from_port":0,"to":"switch","to_port":0},{"from":"gen_inputs","from_port":0,"to":"buffer_2","to_port":0},{"from":"buffer_2","from_port":0,"to":"switch","to_port":1},{"from":"switch","from_port":0,"to":"shader_1","to_port":0},{"from":"shader_1","from_port":0,"to":"gen_outputs","to_port":0}]},{"name":"warp_9","type":"warp","parameters":{"mode":0,"amount":0.1,"eps":0.1},"node_position":{"x":2259.008057,"y":612.957886},"seed_int":0},{"name":"transform2_9","type":"transform2","parameters":{"translate_x":"$time * 0.1","translate_y":"$time * 0.03","rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":1998.260986,"y":428.51947},"seed_int":0,"generic_size":1},{"name":"uniform","type":"uniform","parameters":{"color":{"type":"Color","r":0,"g":0.352478,"b":0.585938,"a":1}},"node_position":{"x":2830.415283,"y":857.355957},"seed_int":0},{"name":"reroute_25","type":"reroute","parameters":{},"node_position":{"x":2427.711914,"y":801.506897},"seed_int":0},{"name":"blend2_13","type":"blend2","parameters":{"blend_type1":2,"amount1":0.67},"node_position":{"x":2521.679688,"y":654.802368},"seed_int":0,"generic_size":1},{"name":"tones_2","type":"tones","parameters":{"in_min":{"type":"Color","r":0.358011,"g":0.358011,"b":0.358011,"a":0},"in_mid":{"type":"Color","r":0.472176,"g":0.472176,"b":0.472176,"a":0.5},"in_max":{"type":"Color","r":0.9605,"g":0.9605,"b":0.9605,"a":1},"out_min":{"type":"Color","r":0.006583,"g":0.006583,"b":0.006583,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":2858.969727,"y":634.65448},"seed_int":0},{"name":"reroute_26","type":"reroute","parameters":{},"node_position":{"x":4835.096191,"y":1340.116577},"seed_int":0},{"name":"reroute_27","type":"reroute","parameters":{},"node_position":{"x":1738.739014,"y":1087.698975},"seed_int":0},{"name":"reroute_28","type":"reroute","parameters":{},"node_position":{"x":1747.546753,"y":1145.263184},"seed_int":0},{"name":"warp_10","type":"warp","parameters":{"mode":0,"amount":0.05,"eps":0.1},"node_position":{"x":2141.838135,"y":1077.999023},"seed_int":0},{"name":"colorize_3","type":"colorize","parameters":{"gradient":{"type":"Gradient","points":[{"pos":0,"r":0.431373,"g":0.627451,"b":0.870588,"a":1},{"pos":0.110336,"r":0.384314,"g":0.564706,"b":0.831373,"a":1},{"pos":0.180119,"r":0.239216,"g":0.396078,"b":0.686275,"a":1},{"pos":0.229462,"r":0.239216,"g":0.396078,"b":0.686275,"a":1},{"pos":0.25153,"r":0.282353,"g":0.423529,"b":0.705882,"a":1},{"pos":0.273597,"r":0.27451,"g":0.640809,"b":0.658824,"a":1},{"pos":0.407826,"r":0.352941,"g":0.552941,"b":0.768627,"a":1},{"pos":0.45717,"r":0.235294,"g":0.435294,"b":0.678431,"a":1},{"pos":0.499311,"r":0.384314,"g":0.811765,"b":0.751654,"a":1},{"pos":0.523372,"r":0.211765,"g":0.415686,"b":0.65098,"a":1},{"pos":0.589573,"r":0.45098,"g":0.647059,"b":0.866667,"a":1},{"pos":0.633708,"r":0.431373,"g":0.682353,"b":0.890196,"a":1},{"pos":0.683052,"r":0.243137,"g":0.661029,"b":0.729412,"a":1},{"pos":0.843703,"r":0.294118,"g":0.545098,"b":0.827451,"a":1},{"pos":0.977933,"r":0.32549,"g":0.588235,"b":0.866667,"a":1},{"pos":1,"r":0.32549,"g":0.592157,"b":0.878431,"a":1}],"interpolation":1}},"node_position":{"x":2954.21875,"y":1148.35376},"seed_int":0},{"name":"blend2_11","type":"blend2","parameters":{"blend_type1":19,"amount1":0.18},"node_position":{"x":3482.942139,"y":964.310181},"seed_int":0,"generic_size":1},{"name":"smooth_curvature2","type":"smooth_curvature2","parameters":{"param0":10,"param1":16,"param2":2.57,"param3":0.49,"param4":1},"node_position":{"x":-1361.390137,"y":212.463623},"seed_int":0},{"name":"hbao","type":"hbao","parameters":{"param0":10,"param1":0.13,"param2":20,"param3":0.46,"param4":4,"param5":1},"node_position":{"x":-1045.060547,"y":547.546936},"seed_int":0},{"name":"edge_detect_2","type":"edge_detect","parameters":{"size":9,"width":2,"threshold":0.4},"node_position":{"x":-1203.991455,"y":408.277283},"seed_int":0},{"name":"reroute_29","type":"reroute","parameters":{},"node_position":{"x":2688.9021,"y":1357.436157},"seed_int":0},{"name":"blend2_14","type":"blend2","parameters":{"blend_type1":2,"amount1":1},"node_position":{"x":2832.397949,"y":1389.65686},"seed_int":0,"generic_size":1},{"name":"tones_3","type":"tones","parameters":{"in_min":{"type":"Color","r":0.247853,"g":0.247853,"b":0.247853,"a":0},"in_mid":{"type":"Color","r":0.522106,"g":0.522106,"b":0.522106,"a":0.5},"in_max":{"type":"Color","r":0.727362,"g":0.727362,"b":0.727362,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":2595.439453,"y":1533.849854},"seed_int":0},{"name":"transform2_10","type":"transform2","parameters":{"translate_x":"$time * 0.16","translate_y":"-$time * 0.03","rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":2344.216797,"y":1543.009277},"seed_int":0,"generic_size":1},{"name":"blend2_15","type":"blend2","parameters":{"blend_type1":9,"amount1":0.18},"node_position":{"x":3802.784424,"y":970.704895},"seed_int":0,"generic_size":1},{"name":"reroute_30","type":"reroute","parameters":{},"node_position":{"x":2151.834961,"y":1827.50647},"seed_int":0},{"name":"reroute_31","type":"reroute","parameters":{},"node_position":{"x":3562.314453,"y":1804.521606},"seed_int":0},{"name":"buffer_6","type":"buffer","parameters":{"size":10},"node_position":{"x":-344.873138,"y":36.185646},"seed_int":0,"version":1},{"name":"transform2_11","type":"transform2","parameters":{"translate_x":"$time * 0.25","translate_y":0,"rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":-3.299056,"y":-92.339645},"seed_int":0,"generic_size":1},{"name":"transform2_12","type":"transform2","parameters":{"translate_x":"$time * 0.3","translate_y":"-$time * 0.1","rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":8.953365,"y":143.940903},"seed_int":0,"generic_size":1},{"name":"warp_11","type":"warp","parameters":{"mode":0,"amount":0.1,"eps":0.1},"node_position":{"x":276.043976,"y":9.610564},"seed_int":0},{"name":"decompose_3","type":"decompose","parameters":{},"node_position":{"x":1411.737061,"y":755.176025},"seed_int":0},{"name":"reroute_32","type":"reroute","parameters":{},"node_position":{"x":1153.164429,"y":746.699097},"seed_int":0},{"name":"blend2_16","type":"blend2","parameters":{"blend_type1":2,"amount1":0.53},"node_position":{"x":3475.660645,"y":1181.876221},"seed_int":0,"generic_size":1},{"name":"reroute_33","type":"reroute","parameters":{},"node_position":{"x":3236.772949,"y":1501.827026},"seed_int":0},{"name":"tones_4","type":"tones","parameters":{"in_min":{"type":"Color","r":0.166557,"g":0.166557,"b":0.166557,"a":0},"in_mid":{"type":"Color","r":0.555958,"g":0.555958,"b":0.555958,"a":0.5},"in_max":{"type":"Color","r":0.992758,"g":0.992758,"b":0.992758,"a":1},"out_min":{"type":"Color","r":1,"g":1,"b":1,"a":0},"out_max":{"type":"Color","r":0,"g":0,"b":0,"a":1}},"node_position":{"x":3395.204346,"y":1482.074341},"seed_int":0},{"name":"transform2_13","type":"transform2","parameters":{"translate_x":"-$time * 0.16","translate_y":"$time * 0.03","rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":3147.772461,"y":1558.532837},"seed_int":0,"generic_size":1},{"name":"blend2_17","type":"blend2","parameters":{"blend_type1":19,"amount1":0.35},"node_position":{"x":4205.643066,"y":915.708862},"seed_int":0,"generic_size":1},{"name":"uniform_2","type":"uniform","parameters":{"color":{"type":"Color","r":0.485703,"g":0.846622,"b":0.894531,"a":1}},"node_position":{"x":3810.425781,"y":1125.727905},"seed_int":0},{"name":"blend2_18","type":"blend2","parameters":{"blend_type1":2,"amount1":0.54},"node_position":{"x":3970.476318,"y":1183.981567},"seed_int":0,"generic_size":1},{"name":"reroute_34","type":"reroute","parameters":{},"node_position":{"x":2103.138672,"y":1915.772827},"seed_int":0},{"name":"reroute_35","type":"reroute","parameters":{},"node_position":{"x":2093.885742,"y":1995.965942},"seed_int":0},{"name":"reroute_36","type":"reroute","parameters":{},"node_position":{"x":3932.157471,"y":1877.218506},"seed_int":0},{"name":"reroute_37","type":"reroute","parameters":{},"node_position":{"x":3989.317627,"y":1967.607178},"seed_int":0},{"name":"colorize_4","type":"colorize","parameters":{"gradient":{"type":"Gradient","points":[{"pos":0.120561,"r":0.699219,"g":0.699219,"b":0.699219,"a":1},{"pos":0.233644,"r":0.386719,"g":0.379166,"b":0.379166,"a":1},{"pos":0.73831,"r":0.152344,"g":0.152344,"b":0.152344,"a":1}],"interpolation":1}},"node_position":{"x":4274.549316,"y":1800.310181},"seed_int":0},{"name":"blend2_19","type":"blend2","parameters":{"blend_type1":0,"amount1":0.49},"node_position":{"x":4786.236328,"y":1045.545654},"seed_int":0,"generic_size":1},{"name":"uniform_3","type":"uniform","parameters":{"color":{"type":"Color","r":0.245697,"g":0.648438,"b":0.572924,"a":1}},"node_position":{"x":4246.634277,"y":1113.852905},"seed_int":0},{"name":"invert_3","type":"invert","parameters":{},"node_position":{"x":4101.871094,"y":1662.292236},"seed_int":0},{"name":"invert_4","type":"invert","parameters":{},"node_position":{"x":4047.614746,"y":1253.113403},"seed_int":0},{"name":"tones_5","type":"tones","parameters":{"in_min":{"type":"Color","r":0.072416,"g":0.072416,"b":0.072416,"a":0},"in_mid":{"type":"Color","r":0.414417,"g":0.414417,"b":0.414417,"a":0.5},"in_max":{"type":"Color","r":0.723502,"g":0.723502,"b":0.723502,"a":1},"out_min":{"type":"Color","r":1,"g":1,"b":1,"a":0},"out_max":{"type":"Color","r":0,"g":0,"b":0,"a":1}},"node_position":{"x":3740.847412,"y":1394.750366},"seed_int":0},{"name":"blend2_20","type":"blend2","parameters":{"blend_type1":2,"amount1":1},"node_position":{"x":4142.557617,"y":1426.056274},"seed_int":0,"generic_size":1},{"name":"transform2_14","type":"transform2","parameters":{"translate_x":"$time * 0.13","translate_y":"$time * 0.03","rotate":0,"scale_x":1,"scale_y":1,"mode":1},"node_position":{"x":3331.44458,"y":1740.085571},"seed_int":0,"generic_size":1},{"name":"tones_6","type":"tones","parameters":{"in_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"in_mid":{"type":"Color","r":0.344832,"g":0.344832,"b":0.344832,"a":0.5},"in_max":{"type":"Color","r":0.907349,"g":0.907349,"b":0.907349,"a":1},"out_min":{"type":"Color","r":1,"g":1,"b":1,"a":0},"out_max":{"type":"Color","r":0,"g":0,"b":0,"a":1}},"node_position":{"x":3771.727783,"y":1696.7854},"seed_int":0},{"name":"reroute_39","type":"reroute","parameters":{},"node_position":{"x":4029.260254,"y":1481.475342},"seed_int":0},{"name":"tones_7","type":"tones","parameters":{"in_min":{"type":"Color","r":0.263332,"g":0.263332,"b":0.263332,"a":0},"in_mid":{"type":"Color","r":0.565833,"g":0.565833,"b":0.565833,"a":0.5},"in_max":{"type":"Color","r":0.763002,"g":0.763002,"b":0.763002,"a":1},"out_min":{"type":"Color","r":0,"g":0,"b":0,"a":0},"out_max":{"type":"Color","r":1,"g":1,"b":1,"a":1}},"node_position":{"x":3723.578369,"y":1203.778931},"seed_int":0},{"name":"blend2_21","type":"blend2","parameters":{"blend_type1":4,"amount1":0.8},"node_position":{"x":4503.145996,"y":1547.55249},"seed_int":0,"generic_size":1},{"name":"brightness_contrast","type":"brightness_contrast","parameters":{"brightness":0.17,"contrast":1},"node_position":{"x":4921.562988,"y":1597.760742},"seed_int":0}],"connections":[{"from":"math_3","from_port":0,"to":"warp_2","to_port":0},{"from":"gradient","from_port":0,"to":"transform2_4","to_port":0},{"from":"transform2_4","from_port":0,"to":"math_3","to_port":0},{"from":"warp_2","from_port":0,"to":"warp_3","to_port":0},{"from":"shape","from_port":0,"to":"transform2","to_port":0},{"from":"shape_2","from_port":0,"to":"transform2_2","to_port":0},{"from":"transform2","from_port":0,"to":"blend2_4","to_port":0},{"from":"transform2_2","from_port":0,"to":"blend2_4","to_port":1},{"from":"warp_5","from_port":0,"to":"tiler","to_port":0},{"from":"tiler","from_port":0,"to":"math","to_port":0},{"from":"edge_detect","from_port":0,"to":"dilate","to_port":0},{"from":"auto_tones_2","from_port":0,"to":"blend2_2","to_port":0},{"from":"tones","from_port":0,"to":"blend2_3","to_port":0},{"from":"blend2_2","from_port":0,"to":"blend2_3","to_port":1},{"from":"dilate","from_port":0,"to":"gaussian_blur_3","to_port":0},{"from":"blend2_3","from_port":0,"to":"warp_5","to_port":0},{"from":"gaussian_blur_3","from_port":0,"to":"warp_6","to_port":0},{"from":"warp_6","from_port":0,"to":"blend2_2","to_port":1},{"from":"warp_3","from_port":0,"to":"buffer_2","to_port":0},{"from":"buffer_2","from_port":0,"to":"blend2_5","to_port":0},{"from":"math","from_port":0,"to":"buffer_3","to_port":0},{"from":"buffer_3","from_port":0,"to":"blend2_5","to_port":1},{"from":"colorize_2","from_port":0,"to":"directional_blur","to_port":1},{"from":"blend2_4","from_port":0,"to":"reroute_4","to_port":0},{"from":"reroute_5","from_port":0,"to":"invert_2","to_port":0},{"from":"warp_4","from_port":0,"to":"blend2","to_port":1},{"from":"transform2_3","from_port":0,"to":"warp","to_port":0},{"from":"transform2_6","from_port":0,"to":"warp","to_port":1},{"from":"reroute_2","from_port":0,"to":"directional_blur","to_port":0},{"from":"reroute_2","from_port":0,"to":"reroute_5","to_port":0},{"from":"blend2_5","from_port":0,"to":"blend2_7","to_port":0},{"from":"buffer_3","from_port":0,"to":"blend2_7","to_port":1},{"from":"blend2_7","from_port":0,"to":"reroute_2","to_port":0},{"from":"reroute_4","from_port":0,"to":"edge_detect","to_port":0},{"from":"reroute_7","from_port":0,"to":"tones","to_port":0},{"from":"reroute_7","from_port":0,"to":"auto_tones_2","to_port":0},{"from":"reroute_4","from_port":0,"to":"reroute_7","to_port":0},{"from":"buffer_3","from_port":0,"to":"reroute_8","to_port":0},{"from":"buffer_2","from_port":0,"to":"warp_7","to_port":0},{"from":"directional_blur","from_port":0,"to":"multi_warp","to_port":0},{"from":"directional_blur","from_port":0,"to":"multi_warp","to_port":1},{"from":"warp","from_port":0,"to":"reroute_3","to_port":0},{"from":"reroute_9","from_port":0,"to":"warp_4","to_port":0},{"from":"reroute_9","from_port":0,"to":"blend2","to_port":0},{"from":"blend2_6","from_port":0,"to":"reroute_9","to_port":0},{"from":"reroute_2","from_port":0,"to":"reroute_10","to_port":0},{"from":"reroute_10","from_port":0,"to":"reroute_11","to_port":0},{"from":"reroute_11","from_port":0,"to":"blend2","to_port":2},{"from":"invert_2","from_port":0,"to":"blend2_6","to_port":2},{"from":"reroute_5","from_port":0,"to":"blend2_6","to_port":0},{"from":"multi_warp","from_port":0,"to":"blend2_6","to_port":1},{"from":"buffer_2","from_port":0,"to":"reroute_6","to_port":0},{"from":"reroute_8","from_port":0,"to":"reroute_14","to_port":0},{"from":"reroute_6","from_port":0,"to":"reroute_13","to_port":0},{"from":"multi_warp","from_port":0,"to":"reroute_15","to_port":0},{"from":"reroute_15","from_port":0,"to":"reroute_12","to_port":0},{"from":"blend2_8","from_port":0,"to":"reroute_17","to_port":0},{"from":"reroute_20","from_port":0,"to":"warp_7","to_port":1},{"from":"reroute_20","from_port":0,"to":"blend2_8","to_port":0},{"from":"reroute_17","from_port":0,"to":"reroute_16","to_port":0},{"from":"buffer_5","from_port":0,"to":"transform2_3","to_port":0},{"from":"warp_7","from_port":0,"to":"blend2_8","to_port":1},{"from":"reroute_3","from_port":0,"to":"reroute","to_port":0},{"from":"iterate_buffer","from_port":1,"to":"transform2_5","to_port":0},{"from":"iterate_buffer","from_port":0,"to":"reroute_21","to_port":0},{"from":"iterate_buffer","from_port":1,"to":"blend2_10","to_port":0},{"from":"transform2_5","from_port":0,"to":"blend2_10","to_port":1},{"from":"directional_noise","from_port":0,"to":"blend2_10","to_port":2},{"from":"reroute_21","from_port":0,"to":"reroute_20","to_port":0},{"from":"blend2_10","from_port":0,"to":"iterate_buffer","to_port":1},{"from":"iterate_buffer","from_port":1,"to":"transform2_5","to_port":1},{"from":"blend2_9","from_port":0,"to":"iterate_buffer","to_port":0},{"from":"combine","from_port":0,"to":"buffer_4","to_port":0},{"from":"reroute_16","from_port":0,"to":"reroute_22","to_port":0},{"from":"buffer_4","from_port":0,"to":"reroute_18","to_port":0},{"from":"transform2_7","from_port":0,"to":"warp_8","to_port":0},{"from":"transform2_8","from_port":0,"to":"warp_8","to_port":1},{"from":"reroute_18","from_port":0,"to":"transform2_7","to_port":0},{"from":"warp_8","from_port":0,"to":"reroute_19","to_port":0},{"from":"reroute_19","from_port":0,"to":"reroute_23","to_port":0},{"from":"reroute_23","from_port":0,"to":"decompose","to_port":0},{"from":"blend2","from_port":0,"to":"auto_tones","to_port":0},{"from":"auto_tones","from_port":0,"to":"combine_2","to_port":0},{"from":"combine_2","from_port":0,"to":"buffer_5","to_port":0},{"from":"reroute","from_port":0,"to":"decompose_2","to_port":0},{"from":"reroute_24","from_port":0,"to":"colorize","to_port":0},{"from":"decompose_2","from_port":0,"to":"reroute_24","to_port":0},{"from":"reroute_13","from_port":0,"to":"combine_2","to_port":1},{"from":"reroute_14","from_port":0,"to":"combine_2","to_port":2},{"from":"reroute_12","from_port":0,"to":"combine_2","to_port":3},{"from":"reroute_22","from_port":0,"to":"combine","to_port":0},{"from":"clouds_noise","from_port":0,"to":"classic_kuwahara","to_port":0},{"from":"classic_kuwahara","from_port":0,"to":"warp_9","to_port":0},{"from":"classic_kuwahara","from_port":0,"to":"transform2_9","to_port":0},{"from":"transform2_9","from_port":0,"to":"warp_9","to_port":1},{"from":"warp_9","from_port":0,"to":"blend2_13","to_port":0},{"from":"reroute_25","from_port":0,"to":"blend2_13","to_port":1},{"from":"blend2_13","from_port":0,"to":"tones_2","to_port":0},{"from":"decompose_2","from_port":2,"to":"reroute_25","to_port":0},{"from":"reroute_26","from_port":0,"to":"normal_map2","to_port":0},{"from":"decompose_2","from_port":1,"to":"reroute_27","to_port":0},{"from":"decompose_2","from_port":3,"to":"reroute_28","to_port":0},{"from":"reroute_28","from_port":0,"to":"warp_10","to_port":0},{"from":"reroute_27","from_port":0,"to":"warp_10","to_port":1},{"from":"warp_10","from_port":0,"to":"colorize_3","to_port":0},{"from":"colorize","from_port":0,"to":"blend2_12","to_port":0},{"from":"uniform","from_port":0,"to":"blend2_12","to_port":1},{"from":"tones_2","from_port":0,"to":"blend2_12","to_port":2},{"from":"blend2_12","from_port":0,"to":"blend2_11","to_port":0},{"from":"colorize_3","from_port":0,"to":"blend2_11","to_port":1},{"from":"blend2","from_port":0,"to":"smooth_curvature2","to_port":0},{"from":"smooth_curvature2","from_port":0,"to":"combine","to_port":1},{"from":"blend2","from_port":0,"to":"hbao","to_port":0},{"from":"hbao","from_port":0,"to":"combine","to_port":2},{"from":"blend2","from_port":0,"to":"edge_detect_2","to_port":0},{"from":"edge_detect_2","from_port":0,"to":"combine","to_port":3},{"from":"decompose","from_port":3,"to":"reroute_29","to_port":0},{"from":"reroute_29","from_port":0,"to":"blend2_14","to_port":0},{"from":"tones_3","from_port":0,"to":"blend2_14","to_port":1},{"from":"transform2_10","from_port":0,"to":"tones_3","to_port":0},{"from":"blend2_11","from_port":0,"to":"blend2_15","to_port":0},{"from":"blend2_14","from_port":0,"to":"blend2_15","to_port":1},{"from":"reroute_30","from_port":0,"to":"reroute_31","to_port":0},{"from":"transform2_11","from_port":0,"to":"warp_11","to_port":0},{"from":"transform2_12","from_port":0,"to":"warp_11","to_port":1},{"from":"buffer_6","from_port":0,"to":"transform2_11","to_port":0},{"from":"reroute_32","from_port":0,"to":"decompose_3","to_port":0},{"from":"warp_11","from_port":0,"to":"reroute_32","to_port":0},{"from":"blend2_16","from_port":0,"to":"reroute_26","to_port":0},{"from":"decompose_3","from_port":0,"to":"reroute_30","to_port":0},{"from":"reroute_24","from_port":0,"to":"reroute_33","to_port":0},{"from":"reroute_33","from_port":0,"to":"blend2_16","to_port":0},{"from":"reroute_31","from_port":0,"to":"blend2_16","to_port":1},{"from":"tones_4","from_port":0,"to":"blend2_16","to_port":2},{"from":"transform2_13","from_port":0,"to":"tones_4","to_port":0},{"from":"blend2_15","from_port":0,"to":"blend2_17","to_port":0},{"from":"uniform_2","from_port":0,"to":"blend2_17","to_port":1},{"from":"tones_4","from_port":0,"to":"blend2_18","to_port":1},{"from":"blend2_18","from_port":0,"to":"blend2_17","to_port":2},{"from":"decompose","from_port":2,"to":"reroute_34","to_port":0},{"from":"decompose","from_port":1,"to":"reroute_35","to_port":0},{"from":"reroute_34","from_port":0,"to":"reroute_36","to_port":0},{"from":"reroute_35","from_port":0,"to":"reroute_37","to_port":0},{"from":"blend2_17","from_port":0,"to":"blend2_19","to_port":0},{"from":"uniform_3","from_port":0,"to":"blend2_19","to_port":1},{"from":"reroute_36","from_port":0,"to":"invert_3","to_port":0},{"from":"reroute_24","from_port":0,"to":"tones_5","to_port":0},{"from":"transform2_14","from_port":0,"to":"tones_6","to_port":0},{"from":"tones_5","from_port":0,"to":"reroute_39","to_port":0},{"from":"reroute_39","from_port":0,"to":"blend2_20","to_port":0},{"from":"tones_6","from_port":0,"to":"blend2_20","to_port":1},{"from":"blend2_20","from_port":0,"to":"blend2_19","to_port":2},{"from":"reroute_31","from_port":0,"to":"tones_7","to_port":0},{"from":"tones_7","from_port":0,"to":"blend2_18","to_port":0},{"from":"reroute_37","from_port":0,"to":"colorize_4","to_port":0},{"from":"colorize_4","from_port":0,"to":"blend2_21","to_port":0},{"from":"invert_3","from_port":0,"to":"blend2_21","to_port":1},{"from":"normal_map2","from_port":0,"to":"Material","to_port":4},{"from":"blend2_19","from_port":0,"to":"Material","to_port":0},{"from":"blend2_21","from_port":0,"to":"brightness_contrast","to_port":0},{"from":"brightness_contrast","from_port":0,"to":"Material","to_port":2},{"from":"combine","from_port":0,"to":"buffer_6","to_port":0}]}